<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Symmetry | Haptic Fix</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@800&display=swap');
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; touch-action: none; overscroll-behavior: none; }  
        canvas { display: block; position: absolute; z-index: 1; }
        .ui { position: relative; z-index: 10; height: 100vh; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .vibe-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 100; display: flex;
            align-items: center; justify-content: center; cursor: pointer;
        }
        .vibe-msg { color: white; font-family: 'Plus Jakarta Sans'; text-align: center; border: 1px solid #333; padding: 20px; border-radius: 20px; background: #111; }
    </style>
</head>
<body>

    <div class="vibe-overlay" id="vibeOverlay">
        <div class="vibe-msg">
            <h2 style="margin:0">ACTIVATE ENGINE</h2>
            <p style="font-size: 12px; color: #888">Tap anywhere to sync hardware</p>
        </div>
    </div>

    <div class="ui">
        <p style="color: #333; letter-spacing: 10px; text-transform: uppercase;">Interactive Fabric</p>
    </div>
    
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const overlay = document.getElementById('vibeOverlay');

        const NAME = "SNEH"; // CHANGE THIS TO YOUR NAME
        let particles = [];
        const mouse = { x: -1000, y: -1000, radius: 60 };
        let canVibrate = false;

        // --- THE FIX: FORCED ACTIVATION ---
        window.addEventListener('touchstart', () => {
            if (!canVibrate) {
                canVibrate = true;
                overlay.style.display = 'none';
                // Triple pulse to confirm hardware link
                if (navigator.vibrate) navigator.vibrate([30, 50, 30]);
            }
        }, { once: false });

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        class Particle {
            constructor(x, y) {
                this.x = x + (Math.random() * 40 - 20);
                this.y = y + (Math.random() * 40 - 20);
                this.baseX = x;
                this.baseY = y;
                this.size = 2.5;
                this.density = (Math.random() * 20) + 10;
            }
            draw() {
                ctx.fillStyle = '#fff';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
            update() {
                let dx = mouse.x - this.x;
                let dy = mouse.y - this.y;
                let dist = Math.sqrt(dx*dx + dy*dy);
                
                if (dist < mouse.radius) {
                    let force = (mouse.radius - dist) / mouse.radius;
                    this.x -= (dx/dist) * force * this.density;
                    this.y -= (dy/dist) * force * this.density;
                    
                    // Strong physical vibration call
                    if (canVibrate && navigator.vibrate) {
                        navigator.vibrate(15); 
                    }
                } else {
                    this.x -= (this.x - this.baseX) / 10;
                    this.y -= (this.y - this.baseY) / 10;
                }
            }
        }

        function init() {
            particles = [];
            ctx.fillStyle = 'white';
            ctx.font = `bold ${Math.min(canvas.width * 0.2, 120)}px 'Plus Jakarta Sans'`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText(NAME, canvas.width/2, canvas.height/2);

            const data = ctx.getImageData(0, 0, canvas.width, canvas.height);
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            for (let y = 0; y < data.height; y += 6) {
                for (let x = 0; x < data.width; x += 6) {
                    if (data.data[(y * 4 * data.width) + (x * 4) + 3] > 128) {
                        particles.push(new Particle(x, y));
                    }
                }
            }
        }

        const handleMove = (e) => {
            const t = e.touches ? e.touches[0] : e;
            mouse.x = t.clientX;
            mouse.y = t.clientY;
        };

        window.addEventListener('touchmove', handleMove, { passive: false });
        window.addEventListener('mousemove', handleMove);

        function animate() {
            ctx.fillStyle = 'rgba(0,0,0,0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            particles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(animate);
        }

        init();
        animate();
    </script>
</body>
</html>
